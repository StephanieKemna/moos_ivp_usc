//*******************************************************
// Vehicle Configuration File
//

// MOOS community specs
NoNetwork = true
ServerHost = $(SERVER_HOST)
ServerPort = $(VPORT)
// Community name IS the vehicle name
Community  = $(VNAME)

Simulator  = true

modem_id_lookup_path = modemidlookup.txt
modem_id = $(MODEMID)

// warp the simulation?
#include $(PLUG_DIR)/plug_origin_warp.moos

//------------------------------------------------------------
ProcessConfig = ANTLER
{
  MSBetweenLaunches = 200

  // moos db, moos util apps
  Run = MOOSDB             @ NewConsole = false
  Run = pLogger            @ NewConsole = false
  Run = uProcessWatch      @ NewConsole = true

  // vehicle sim
  Run = uSimMarine         @ NewConsole = false
  Run = pMarinePID         @ NewConsole = false

  // behaviors
  Run = pHelmIvP           @ NewConsole = false

  // generate 'node reports'
  Run = pNodeReporter      @ NewConsole = false

  // collision avoidance
  Run = pBasicContactMgr   @ NewConsole = false

  // acoustic communications
  pAcommsHandlerConfig = -geometry,179x100+0+20
  Run = pAcommsHandler @ NewConsole=false,XConfig=pAcommsHandlerConfig ~ pAcommsHandler
  Run = pHostInfo @ NewConsole = false ~ pHostInfo
  Run = uFldNodeBroker @ NewConsole = false
  Run = uFldMessageHandler @ NewConsole = false
  Run = pShare @ NewConsole = false

  // add other processes here
  uSBSConfig = -geometry,80x20+2000+0,-bg,lightgreen,-fg,black
  Run = uSimBioSensor @ NewConsole = true,XConfig=uSBSConfig

  pGPConfig = -geometry,80x20+2000+400,-bg,lightblue,-fg,black
  Run = pGP @ NewConsole = true,XConfig=pGPConfig

  pSPConfig = -geometry,80x20+2000+800,-bg,lightyellow,-fg,black
  Run = pSamplePoints @ NewConsole = true,XConfig=pSPConfig

  Run = pLonLatToWptUpdate @ NewConsole = true
}
//------------------------------------------------------------

// utils
#include $(PLUG_DIR)/plug_pLogger.moos
#include $(PLUG_DIR)/plug_uProcessWatch.moos

// vehicle simulation
#include $(PLUG_DIR)/plug_uSimMarine.moos
#include $(PLUG_DIR)/plug_pMarinePID.moos

// behaviors
#include $(PLUG_DIR)/plug_pHelmIvP.moos

// generate 'node reports'
#include $(PLUG_DIR)/plug_pNodeReporter.moos

// collision avoidance
// node_reports are passed via uFldNodeBroker and pShare through shoreside
#include $(PLUG_DIR)/plug_pBasicContactMgr.moos

// simulate acoustic communications
#include $(PLUG_DIR)/plug_pAcommsHandler.moos
#include $(PLUG_DIR)/plug_pHostInfo.moos
#include $(PLUG_DIR)/plug_uFldNodeBroker.moos
#include $(PLUG_DIR)/plug_uFldMessageHandler.moos
#include $(PLUG_DIR)/plug_pShare.moos

// add other processes here
#include $(PLUG_DIR)/plug_uSimBioSensor.moos

//--------------------------------------------------
// pGP configuration block
//
ProcessConfig = pGP
{
  AppTick   = 2
  CommsTick = 2

  // define the names of input variables
  input_var_data = "SIM_DATA"
  input_var_sample_points = "SAMPLE_POINTS"
  input_var_sample_points_specs = "SAMPLE_POINTS_SPECS"
  output_var_predictions = "GP_PREDICTIONS"

  // define the prediction interval (predict every X seconds)
  prediction_interval = 300
}

//--------------------------------------------------
// pSamplePoints configuration block
//
ProcessConfig = pSamplePoints
{
  AppTick   = 2
  CommsTick = 2

  // potential process parameters would go here
  lawnmower_config = $(LAWNMOWER)

  // division factor for grid spacing (increase resolution vs lawnmower spec)
  division_factor = 2

  // define what output variable name to use
  // for publishing list of sample points
  output_var = SAMPLE_POINTS

  // define what output variable name to use
  // for publishing sample points grid spec
  output_var_specs = SAMPLE_POINTS_SPECS
}

//--------------------------------------------------
// pLonLatToWptUpdate configuration block
//
ProcessConfig = pLonLatToWptUpdate
{
  AppTick   = 2
  CommsTick = 2

  // specify variable names
  input_var_lonlat = "GP_PREDICTIONS"
  output_var_wpt_update = "ADAPTIVE_WPT_UPDATES"
}
